<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:ebisf="http://www.ebi.ac.uk/faces/site">

  <tr:document title="PSICQUIC View">

         <trh:head>

            <meta http-equiv="Content-Type"
                  content="text/html; charset=UTF-8"/>

            <meta name="description" content="#{intactView['webapp.name']}"/>


            <!-- IntAct dynamic application should not be indexed by search engines -->
            <meta name='robots' content='nofollow'/>

            <link rel="stylesheet" href="#{ebisf:absoluteEbiUrl()}/inc/css/contents.css" type="text/css"/>
            <link rel="stylesheet" href="#{ebisf:absoluteEbiUrl()}/inc/css/userstyles.css" type="text/css"/>
            <link rel="stylesheet" href="#{ebisf:absoluteEbiUrl()}/inc/css/sidebars.css" type="text/css"/>

            <trh:script source="#{ebisf:absoluteEbiUrl()}/inc/js/contents.js" type="text/javascript"/>

             <script type="text/javascript"
                src="http://o.aolcdn.com/dojo/1.0.0/dojo/dojo.xd.js"></script>

             <trh:script source="/js/intact.js"/>

        </trh:head>
       <tr:form>

           <!-- To avoid expired sessions, poll every 15 mins -->
           <tr:poll interval="#{15*60*1000}"/>

           <tr:statusIndicator id="status">
               <f:facet name="busy">
                   <tr:panelGroupLayout layout="horizontal">
                       <tr:image source="/skins/ebi/images/status_busy_redback.gif"
                                 inlineStyle="vertical-align:middle"/>
                       <tr:outputFormatted value="&#160;"/>
                       <tr:outputText value="Loading..."/>
                   </tr:panelGroupLayout>
               </f:facet>
           </tr:statusIndicator>

          <br/>

           <ui:include src="/pages/search/search_panel.xhtml"  />

           <tr:panelGroupLayout rendered="#{fn:length(searchBean.inactiveServices) gt 0}">
               Searches these databases: <b>#{fn:join(searchBean.activeServiceNames, ', ')}</b>

               There are some inactive services at the moment: <b>#{fn:join(searchBean.inactiveServiceNames, ', ')}</b>. (
               <tr:goLink text="check status" destination="http://www.ebi.ac.uk/intact/psicquic-registry/registry?action=STATUS"
                       targetFrame="_blank"/> | <tr:commandLink text="refresh" actionListener="#{searchBean.refresh}"/>)

               <tr:separator/>
           </tr:panelGroupLayout>

           <tr:panelTabbed position="above" rendered="#{searchBean.totalResults gt 0}">
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="IntAct"/>
               </ui:include>
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="MINT"/>
               </ui:include>
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="BioGrid"/>
               </ui:include>
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="iRefIndex"/>
               </ui:include>
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="MPIDB"/>
               </ui:include>
               <ui:include src="/pages/search/result_tab.xhtml">
                   <ui:param name="name" value="MatrixDB"/>
               </ui:include>

           </tr:panelTabbed>

       </tr:form>
   </tr:document>

</ui:composition>